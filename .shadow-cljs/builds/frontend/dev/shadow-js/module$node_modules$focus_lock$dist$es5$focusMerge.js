["^ ","~:resource-id",["~:shadow.build.npm/resource","node_modules/focus-lock/dist/es5/focusMerge.js"],"~:js","shadow$provide.module$node_modules$focus_lock$dist$es5$focusMerge=function(global,require,module,exports){Object.defineProperty(exports,\"__esModule\",{value:!0});exports.getFocusMerge=void 0;var solver_1=require(\"module$node_modules$focus_lock$dist$es5$solver\"),DOMutils_1=require(\"module$node_modules$focus_lock$dist$es5$utils$DOMutils\"),all_affected_1=require(\"module$node_modules$focus_lock$dist$es5$utils$all_affected\"),auto_focus_1=require(\"module$node_modules$focus_lock$dist$es5$utils$auto_focus\"),\ngetActiveElement_1=require(\"module$node_modules$focus_lock$dist$es5$utils$getActiveElement\"),is_1=require(\"module$node_modules$focus_lock$dist$es5$utils$is\"),parenting_1=require(\"module$node_modules$focus_lock$dist$es5$utils$parenting\"),reorderNodes=function(srcNodes,dstNodes){var remap=new Map;dstNodes.forEach(function(entity){return remap.set(entity.node,entity)});return srcNodes.map(function(node){return remap.get(node)}).filter(is_1.isDefined)};exports.getFocusMerge=function(topNode,lastNode){var activeElement=\ndocument&&(0,getActiveElement_1.getActiveElement)(),entries=(0,all_affected_1.getAllAffectedNodes)(topNode).filter(is_1.isNotAGuard),commonParent=(0,parenting_1.getTopCommonParent)(activeElement||topNode,topNode,entries);topNode=new Map;var anyFocusable=(0,DOMutils_1.getAllTabbableNodes)(entries,topNode),innerElements=(0,DOMutils_1.getTabbableNodes)(entries,topNode).filter(function(_a){return(0,is_1.isNotAGuard)(_a.node)});if(!innerElements[0]&&(innerElements=anyFocusable,!innerElements[0]))return;\ncommonParent=(0,DOMutils_1.getAllTabbableNodes)([commonParent],topNode).map(function(_a){return _a.node});innerElements=reorderNodes(commonParent,innerElements);var innerNodes=innerElements.map(function(_a){return _a.node});lastNode=(0,solver_1.newFocus)(innerNodes,commonParent,activeElement,lastNode);if(lastNode===solver_1.NEW_FOCUS){if(entries=(0,auto_focus_1.pickAutofocus)(anyFocusable,innerNodes,(0,parenting_1.allParentAutofocusables)(entries,topNode)))return{node:entries};console.warn(\"focus-lock: cannot find any node to move focus into\")}else return void 0===\nlastNode?lastNode:innerElements[lastNode]}}","~:source","shadow$provide[\"module$node_modules$focus_lock$dist$es5$focusMerge\"] = function(global,require,module,exports) {\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getFocusMerge = void 0;\nvar solver_1 = require(\"./solver\");\nvar DOMutils_1 = require(\"./utils/DOMutils\");\nvar all_affected_1 = require(\"./utils/all-affected\");\nvar auto_focus_1 = require(\"./utils/auto-focus\");\nvar getActiveElement_1 = require(\"./utils/getActiveElement\");\nvar is_1 = require(\"./utils/is\");\nvar parenting_1 = require(\"./utils/parenting\");\nvar reorderNodes = function (srcNodes, dstNodes) {\n    var remap = new Map();\n    // no Set(dstNodes) for IE11 :(\n    dstNodes.forEach(function (entity) { return remap.set(entity.node, entity); });\n    // remap to dstNodes\n    return srcNodes.map(function (node) { return remap.get(node); }).filter(is_1.isDefined);\n};\n/**\n * given top node(s) and the last active element return the element to be focused next\n * @param topNode\n * @param lastNode\n */\nvar getFocusMerge = function (topNode, lastNode) {\n    var activeElement = document && (0, getActiveElement_1.getActiveElement)();\n    var entries = (0, all_affected_1.getAllAffectedNodes)(topNode).filter(is_1.isNotAGuard);\n    var commonParent = (0, parenting_1.getTopCommonParent)(activeElement || topNode, topNode, entries);\n    var visibilityCache = new Map();\n    var anyFocusable = (0, DOMutils_1.getAllTabbableNodes)(entries, visibilityCache);\n    var innerElements = (0, DOMutils_1.getTabbableNodes)(entries, visibilityCache).filter(function (_a) {\n        var node = _a.node;\n        return (0, is_1.isNotAGuard)(node);\n    });\n    if (!innerElements[0]) {\n        innerElements = anyFocusable;\n        if (!innerElements[0]) {\n            return undefined;\n        }\n    }\n    var outerNodes = (0, DOMutils_1.getAllTabbableNodes)([commonParent], visibilityCache).map(function (_a) {\n        var node = _a.node;\n        return node;\n    });\n    var orderedInnerElements = reorderNodes(outerNodes, innerElements);\n    var innerNodes = orderedInnerElements.map(function (_a) {\n        var node = _a.node;\n        return node;\n    });\n    var newId = (0, solver_1.newFocus)(innerNodes, outerNodes, activeElement, lastNode);\n    if (newId === solver_1.NEW_FOCUS) {\n        var focusNode = (0, auto_focus_1.pickAutofocus)(anyFocusable, innerNodes, (0, parenting_1.allParentAutofocusables)(entries, visibilityCache));\n        if (focusNode) {\n            return { node: focusNode };\n        }\n        else {\n            console.warn('focus-lock: cannot find any node to move focus into');\n            return undefined;\n        }\n    }\n    if (newId === undefined) {\n        return newId;\n    }\n    return orderedInnerElements[newId];\n};\nexports.getFocusMerge = getFocusMerge;\n\n};","~:removed-requires",["~#set",[]],"~:actual-requires",["^5",["~$module$node_modules$focus_lock$dist$es5$utils$all_affected","~$module$node_modules$focus_lock$dist$es5$utils$DOMutils","~$shadow.js","~$module$node_modules$focus_lock$dist$es5$utils$is","~$module$node_modules$focus_lock$dist$es5$solver","~$module$node_modules$focus_lock$dist$es5$utils$getActiveElement","~$module$node_modules$focus_lock$dist$es5$utils$auto_focus","~$module$node_modules$focus_lock$dist$es5$utils$parenting"]],"~:properties",["^5",["__esModule","value","getFocusMerge","node"]],"~:compiled-at",1681642524892,"~:source-map-json","{\n\"version\":3,\n\"file\":\"module$node_modules$focus_lock$dist$es5$focusMerge.js\",\n\"lineCount\":5,\n\"mappings\":\"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\",\n\"sources\":[\"node_modules/focus-lock/dist/es5/focusMerge.js\"],\n\"sourcesContent\":[\"shadow$provide[\\\"module$node_modules$focus_lock$dist$es5$focusMerge\\\"] = function(global,require,module,exports) {\\n\\\"use strict\\\";\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.getFocusMerge = void 0;\\nvar solver_1 = require(\\\"./solver\\\");\\nvar DOMutils_1 = require(\\\"./utils/DOMutils\\\");\\nvar all_affected_1 = require(\\\"./utils/all-affected\\\");\\nvar auto_focus_1 = require(\\\"./utils/auto-focus\\\");\\nvar getActiveElement_1 = require(\\\"./utils/getActiveElement\\\");\\nvar is_1 = require(\\\"./utils/is\\\");\\nvar parenting_1 = require(\\\"./utils/parenting\\\");\\nvar reorderNodes = function (srcNodes, dstNodes) {\\n    var remap = new Map();\\n    // no Set(dstNodes) for IE11 :(\\n    dstNodes.forEach(function (entity) { return remap.set(entity.node, entity); });\\n    // remap to dstNodes\\n    return srcNodes.map(function (node) { return remap.get(node); }).filter(is_1.isDefined);\\n};\\n/**\\n * given top node(s) and the last active element return the element to be focused next\\n * @param topNode\\n * @param lastNode\\n */\\nvar getFocusMerge = function (topNode, lastNode) {\\n    var activeElement = document && (0, getActiveElement_1.getActiveElement)();\\n    var entries = (0, all_affected_1.getAllAffectedNodes)(topNode).filter(is_1.isNotAGuard);\\n    var commonParent = (0, parenting_1.getTopCommonParent)(activeElement || topNode, topNode, entries);\\n    var visibilityCache = new Map();\\n    var anyFocusable = (0, DOMutils_1.getAllTabbableNodes)(entries, visibilityCache);\\n    var innerElements = (0, DOMutils_1.getTabbableNodes)(entries, visibilityCache).filter(function (_a) {\\n        var node = _a.node;\\n        return (0, is_1.isNotAGuard)(node);\\n    });\\n    if (!innerElements[0]) {\\n        innerElements = anyFocusable;\\n        if (!innerElements[0]) {\\n            return undefined;\\n        }\\n    }\\n    var outerNodes = (0, DOMutils_1.getAllTabbableNodes)([commonParent], visibilityCache).map(function (_a) {\\n        var node = _a.node;\\n        return node;\\n    });\\n    var orderedInnerElements = reorderNodes(outerNodes, innerElements);\\n    var innerNodes = orderedInnerElements.map(function (_a) {\\n        var node = _a.node;\\n        return node;\\n    });\\n    var newId = (0, solver_1.newFocus)(innerNodes, outerNodes, activeElement, lastNode);\\n    if (newId === solver_1.NEW_FOCUS) {\\n        var focusNode = (0, auto_focus_1.pickAutofocus)(anyFocusable, innerNodes, (0, parenting_1.allParentAutofocusables)(entries, visibilityCache));\\n        if (focusNode) {\\n            return { node: focusNode };\\n        }\\n        else {\\n            console.warn('focus-lock: cannot find any node to move focus into');\\n            return undefined;\\n        }\\n    }\\n    if (newId === undefined) {\\n        return newId;\\n    }\\n    return orderedInnerElements[newId];\\n};\\nexports.getFocusMerge = getFocusMerge;\\n\\n};\"],\n\"names\":[\"shadow$provide\",\"global\",\"require\",\"module\",\"exports\",\"Object\",\"defineProperty\",\"value\",\"getFocusMerge\",\"solver_1\",\"DOMutils_1\",\"all_affected_1\",\"auto_focus_1\",\"getActiveElement_1\",\"is_1\",\"parenting_1\",\"reorderNodes\",\"srcNodes\",\"dstNodes\",\"remap\",\"Map\",\"forEach\",\"entity\",\"set\",\"node\",\"map\",\"get\",\"filter\",\"isDefined\",\"topNode\",\"lastNode\",\"activeElement\",\"document\",\"getActiveElement\",\"entries\",\"getAllAffectedNodes\",\"isNotAGuard\",\"commonParent\",\"getTopCommonParent\",\"visibilityCache\",\"anyFocusable\",\"getAllTabbableNodes\",\"innerElements\",\"getTabbableNodes\",\"_a\",\"outerNodes\",\"orderedInnerElements\",\"innerNodes\",\"newId\",\"newFocus\",\"NEW_FOCUS\",\"focusNode\",\"pickAutofocus\",\"allParentAutofocusables\",\"console\",\"warn\",\"undefined\"]\n}\n"]