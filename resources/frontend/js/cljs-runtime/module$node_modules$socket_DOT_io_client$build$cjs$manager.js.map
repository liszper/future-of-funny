{
"version":3,
"file":"module$node_modules$socket_DOT_io_client$build$cjs$manager.js",
"lineCount":14,
"mappings":"AAAAA,cAAA,CAAA,0DAAA,CAA+E,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAEvH,IAAIC,gBAAmB,IAAnBA,EAA2B,IAAKA,CAAAA,eAAhCA,GAAqDC,MAAOC,CAAAA,MAAP,CAAiB,QAAQ,CAACC,CAAD,CAAIC,CAAJ,CAAOC,CAAP,CAAUC,EAAV,CAAc,CACjFC,IAAAA,EAAX,GAAID,EAAJ,GAAsBA,EAAtB,CAA2BD,CAA3B,CACAJ,OAAOO,CAAAA,cAAP,CAAsBL,CAAtB,CAAyBG,EAAzB,CAA6B,CAAEG,WAAY,CAAA,CAAd,CAAoBC,IAAKA,QAAQ,EAAG,CAAE,MAAON,EAAA,CAAEC,CAAF,CAAT,CAApC,CAA7B,CAF4F,CAAvC,CAGnD,QAAQ,CAACF,CAAD,CAAIC,CAAJ,CAAOC,CAAP,CAAUC,EAAV,CAAc,CACbC,IAAAA,EAAX,GAAID,EAAJ,GAAsBA,EAAtB,CAA2BD,CAA3B,CACAF,EAAA,CAAEG,EAAF,CAAA,CAAQF,CAAA,CAAEC,CAAF,CAFgB,CAHxBL,CAAJ,CAOIW,mBAAsB,IAAtBA,EAA8B,IAAKA,CAAAA,kBAAnCA,GAA2DV,MAAOC,CAAAA,MAAP,CAAiB,QAAQ,CAACC,CAAD,CAAIS,CAAJ,CAAO,CAC3FX,MAAOO,CAAAA,cAAP,CAAsBL,CAAtB,CAAyB,SAAzB,CAAoC,CAAEM,WAAY,CAAA,CAAd,CAAoBI,MAAOD,CAA3B,CAApC,CAD2F,CAAhC,CAE1D,QAAQ,CAACT,CAAD,CAAIS,CAAJ,CAAO,CAChBT,CAAA,CAAE,SAAF,CAAA;AAAeS,CADC,CAFhBD,CAKAG,OAAAA,CAAgB,IAAhBA,EAAwB,IAAKA,CAAAA,YAA7BA,EAA8C,QAAS,CAACC,GAAD,CAAM,CAC7D,GAAIA,GAAJ,EAAWA,GAAIC,CAAAA,UAAf,CAA2B,MAAOD,IAClC,KAAIE,OAAS,EACb,IAAW,IAAX,EAAIF,GAAJ,CAAiB,IAAKV,IAAIA,CAAT,GAAcU,IAAd,CAA6B,SAAV,GAAIV,CAAJ,EAAuBJ,MAAOiB,CAAAA,SAAUC,CAAAA,cAAeC,CAAAA,IAAhC,CAAqCL,GAArC,CAA0CV,CAA1C,CAAvB,EAAqEL,eAAA,CAAgBiB,MAAhB,CAAwBF,GAAxB,CAA6BV,CAA7B,CACzGM,mBAAA,CAAmBM,MAAnB,CAA2BF,GAA3B,CACA,OAAOE,OALsD,CAO7DI,OAAAA,CAAmB,IAAnBA,EAA2B,IAAKA,CAAAA,eAAhCA,EAAoD,QAAS,CAACN,GAAD,CAAM,CACnE,MAAQA,IAAD,EAAQA,GAAIC,CAAAA,UAAZ,CAA0BD,GAA1B,CAAgC,CAAE,UAAWA,GAAb,CAD4B,CAGvEd,OAAOO,CAAAA,cAAP,CAAsBT,OAAtB,CAA+B,YAA/B,CAA6C,CAAEc,MAAO,CAAA,CAAT,CAA7C,CACAd,QAAQuB,CAAAA,OAAR,CAAkB,IAAK,EACvB,OAAMC,mBAAqB1B,OAAA,CAAQ,0DAAR,CAA3B;AACM2B,YAAc3B,OAAA,CAAQ,2DAAR,CADpB,CAEM4B,OAASX,MAAA,CAAajB,OAAA,CAAQ,0DAAR,CAAb,CAFf,CAGM6B,QAAU7B,OAAA,CAAQ,uDAAR,CAHhB,CAIM8B,YAAc9B,OAAA,CAAQ,mEAAR,CACd+B,OAAAA,CAAsB/B,OAAA,CAAQ,4DAAR,CAE5B,OAAMgC,MADUR,MAAAS,CAAgBjC,OAAA,CAAQ,yEAAR,CAAhBiC,CACMC,CAAAA,OAAR,CAAgB,0BAAhB,CACd;KAAMT,QAAN,QAAsBM,OAAoBI,CAAAA,OAA1C,CACIC,WAAW,CAACC,GAAD,CAAMC,IAAN,CAAY,CACnB,IAAIC,EACJ,MAAA,EACA,KAAKC,CAAAA,IAAL,CAAY,EACZ,KAAKC,CAAAA,IAAL,CAAY,EACRJ,IAAJ,EAAW,QAAX,GAAwB,MAAOA,IAA/B,GACIC,IACA,CADOD,GACP,CAAAA,GAAA,CAAM3B,IAAAA,EAFV,CAIA4B,KAAA,CAAOA,IAAP,EAAe,EACfA,KAAKI,CAAAA,IAAL,CAAYJ,IAAKI,CAAAA,IAAjB,EAAyB,YACzB,KAAKJ,CAAAA,IAAL,CAAYA,IACZZ,mBAAmBiB,CAAAA,qBAAnB,CAAyC,IAAzC,CAA+CL,IAA/C,CACA,KAAKM,CAAAA,YAAL,CAAwC,CAAA,CAAxC,GAAkBN,IAAKM,CAAAA,YAAvB,CACA,KAAKC,CAAAA,oBAAL,CAA0BP,IAAKO,CAAAA,oBAA/B,EAAuDC,QAAvD,CACA,KAAKC,CAAAA,iBAAL,CAAuBT,IAAKS,CAAAA,iBAA5B,EAAiD,GAAjD,CACA,KAAKC,CAAAA,oBAAL,CAA0BV,IAAKU,CAAAA,oBAA/B,EAAuD,GAAvD,CACA,KAAKC,CAAAA,mBAAL,CAA6D,IAApC;CAACV,EAAD,CAAMD,IAAKW,CAAAA,mBAAX,GAAmD,IAAK,EAAxD,GAA4CV,EAA5C,CAA4DA,EAA5D,CAAiE,EAA1F,CACA,KAAKW,CAAAA,OAAL,CAAe,IAAIpB,WAAYqB,CAAAA,OAAhB,CAAwB,CACnCC,IAAK,IAAKL,CAAAA,iBAAL,EAD8B,CAEnCM,IAAK,IAAKL,CAAAA,oBAAL,EAF8B,CAGnCM,OAAQ,IAAKL,CAAAA,mBAAL,EAH2B,CAAxB,CAKf,KAAKM,CAAAA,OAAL,CAAa,IAAA,EAAQjB,IAAKiB,CAAAA,OAAb,CAAuB,GAAvB,CAA+BjB,IAAKiB,CAAAA,OAAjD,CACA,KAAKC,CAAAA,WAAL,CAAmB,QACnB,KAAKnB,CAAAA,GAAL,CAAWA,GACLoB,IAAAA,CAAUnB,IAAKV,CAAAA,MAAf6B,EAAyB7B,MAC/B,KAAK8B,CAAAA,OAAL,CAAe,IAAID,GAAQE,CAAAA,OAC3B,KAAKC,CAAAA,OAAL,CAAe,IAAIH,GAAQI,CAAAA,OAE3B,EADA,IAAKC,CAAAA,YACL,CADyC,CAAA,CACzC,GADoBxB,IAAKyB,CAAAA,WACzB,GACI,IAAKC,CAAAA,IAAL,EA/Be,CAiCvBpB,YAAY,CAAC7B,CAAD,CAAI,CACZ,GAAI,CAACkD,SAAUC,CAAAA,MAAf,CACI,MAAO,KAAKC,CAAAA,aAChB,KAAKA,CAAAA,aAAL,CAAqB,CAAC,CAACpD,CACvB,OAAO,KAJK,CAMhB8B,oBAAoB,CAAC9B,CAAD,CAAI,CACpB,GAAUL,IAAAA,EAAV;AAAIK,CAAJ,CACI,MAAO,KAAKqD,CAAAA,qBAChB,KAAKA,CAAAA,qBAAL,CAA6BrD,CAC7B,OAAO,KAJa,CAMxBgC,iBAAiB,CAAChC,CAAD,CAAI,CACjB,IAAIwB,EACJ,IAAU7B,IAAAA,EAAV,GAAIK,CAAJ,CACI,MAAO,KAAKsD,CAAAA,kBAChB,KAAKA,CAAAA,kBAAL,CAA0BtD,CACF,KAAxB,IAACwB,EAAD,CAAM,IAAKW,CAAAA,OAAX,GAAuC,IAAK,EAA5C,GAAgCX,EAAhC,CAAgD,IAAK,EAArD,CAAyDA,EAAG+B,CAAAA,MAAH,CAAUvD,CAAV,CACzD,OAAO,KANU,CAQrBkC,mBAAmB,CAAClC,CAAD,CAAI,CACnB,IAAIwB,EACJ,IAAU7B,IAAAA,EAAV,GAAIK,CAAJ,CACI,MAAO,KAAKwD,CAAAA,oBAChB,KAAKA,CAAAA,oBAAL,CAA4BxD,CACJ,KAAxB,IAACwB,EAAD,CAAM,IAAKW,CAAAA,OAAX,GAAuC,IAAK,EAA5C,GAAgCX,EAAhC,CAAgD,IAAK,EAArD,CAAyDA,EAAGiC,CAAAA,SAAH,CAAazD,CAAb,CACzD,OAAO,KANY,CAQvBiC,oBAAoB,CAACjC,CAAD,CAAI,CACpB,IAAIwB,EACJ,IAAU7B,IAAAA,EAAV,GAAIK,CAAJ,CACI,MAAO,KAAK0D,CAAAA,qBAChB;IAAKA,CAAAA,qBAAL,CAA6B1D,CACL,KAAxB,IAACwB,EAAD,CAAM,IAAKW,CAAAA,OAAX,GAAuC,IAAK,EAA5C,GAAgCX,EAAhC,CAAgD,IAAK,EAArD,CAAyDA,EAAGmC,CAAAA,MAAH,CAAU3D,CAAV,CACzD,OAAO,KANa,CAQxBwC,OAAO,CAACxC,CAAD,CAAI,CACP,GAAI,CAACkD,SAAUC,CAAAA,MAAf,CACI,MAAO,KAAKS,CAAAA,QAChB,KAAKA,CAAAA,QAAL,CAAgB5D,CAChB,OAAO,KAJA,CAYX6D,oBAAoB,EAAG,CAEf,CAAC,IAAKC,CAAAA,aAAV,EACI,IAAKV,CAAAA,aADT,EAE8B,CAF9B,GAEI,IAAKjB,CAAAA,OAAQ4B,CAAAA,QAFjB,EAII,IAAKC,CAAAA,SAAL,EANe,CAgBvBf,IAAI,CAACgB,EAAD,CAAK,CACLhD,KAAA,CAAM,eAAN,CAAuB,IAAKwB,CAAAA,WAA5B,CACA,IAAI,CAAC,IAAKA,CAAAA,WAAYyB,CAAAA,OAAjB,CAAyB,MAAzB,CAAL,CACI,MAAO,KACXjD,MAAA,CAAM,YAAN,CAAoB,IAAKK,CAAAA,GAAzB,CAEA,OAAM6C,OADN,IAAKC,CAAAA,MACCD,CADQ,IAAIxD,kBAAmB0D,CAAAA,MAAvB,CAA8B,IAAK/C,CAAAA,GAAnC,CAAwC,IAAKC,CAAAA,IAA7C,CACd,CACM+C,KAAO,IACb,KAAK7B,CAAAA,WAAL;AAAmB,SACnB,KAAK8B,CAAAA,aAAL,CAAqB,CAAA,CAErB,OAAMC,eAAiB1D,OAAQ2D,CAAAA,EAAR,CAAWN,MAAX,CAAmB,MAAnB,CAA2B,QAAS,EAAG,CAC1DG,IAAKI,CAAAA,MAAL,EACAT,GAAA,EAAMA,EAAA,EAFoD,CAAvC,CAAvB,CAKMU,SAAW7D,OAAQ2D,CAAAA,EAAR,CAAWN,MAAX,CAAmB,OAAnB,CAA6BS,GAAD,EAAS,CAClD3D,KAAA,CAAM,OAAN,CACAqD,KAAKO,CAAAA,OAAL,EACAP,KAAK7B,CAAAA,WAAL,CAAmB,QACnB,KAAKqC,CAAAA,YAAL,CAAkB,OAAlB,CAA2BF,GAA3B,CACIX,GAAJ,CACIA,EAAA,CAAGW,GAAH,CADJ,CAKIN,IAAKT,CAAAA,oBAAL,EAV8C,CAArC,CAajB,IAAI,CAAA,CAAJ,GAAc,IAAKD,CAAAA,QAAnB,CAA6B,CACzB,MAAMpB,QAAU,IAAKoB,CAAAA,QACrB3C,MAAA,CAAM,uCAAN,CAA+CuB,OAA/C,CACgB,EAAhB,GAAIA,OAAJ,EACIgC,cAAA,EAGJ,OAAMO,MAAQ,IAAKC,CAAAA,YAAL,CAAkB,EAAA,EAAM,CAClC/D,KAAA,CAAM,oCAAN,CAA4CuB,OAA5C,CACAgC;cAAA,EACAL,OAAOc,CAAAA,KAAP,EAEAd,OAAOe,CAAAA,IAAP,CAAY,OAAZ,CAAyBC,KAAJ,CAAU,SAAV,CAArB,CALkC,CAAxB,CAMX3C,OANW,CAOV,KAAKjB,CAAAA,IAAK6D,CAAAA,SAAd,EACIL,KAAMM,CAAAA,KAAN,EAEJ,KAAK3D,CAAAA,IAAK4D,CAAAA,IAAV,CAAeC,QAAmB,EAAG,CACjCC,YAAA,CAAaT,KAAb,CADiC,CAArC,CAjByB,CAqB7B,IAAKrD,CAAAA,IAAK4D,CAAAA,IAAV,CAAed,cAAf,CACA,KAAK9C,CAAAA,IAAK4D,CAAAA,IAAV,CAAeX,QAAf,CACA,OAAO,KApDF,CA4DTc,OAAO,CAACxB,EAAD,CAAK,CACR,MAAO,KAAKhB,CAAAA,IAAL,CAAUgB,EAAV,CADC,CAQZS,MAAM,EAAG,CACLzD,KAAA,CAAM,MAAN,CAEA,KAAK4D,CAAAA,OAAL,EAEA,KAAKpC,CAAAA,WAAL,CAAmB,MACnB,KAAKqC,CAAAA,YAAL,CAAkB,MAAlB,CAEA,OAAMX,OAAS,IAAKC,CAAAA,MACpB,KAAK1C,CAAAA,IAAK4D,CAAAA,IAAV,CAAexE,OAAQ2D,CAAAA,EAAR,CAAWN,MAAX,CAAmB,MAAnB,CAA2B,IAAKuB,CAAAA,MAAOC,CAAAA,IAAZ,CAAiB,IAAjB,CAA3B,CAAf,CAAmE7E,OAAQ2D,CAAAA,EAAR,CAAWN,MAAX,CAAmB,MAAnB,CAA2B,IAAKyB,CAAAA,MAAOD,CAAAA,IAAZ,CAAiB,IAAjB,CAA3B,CAAnE,CAAuH7E,OAAQ2D,CAAAA,EAAR,CAAWN,MAAX;AAAmB,OAAnB,CAA4B,IAAK0B,CAAAA,OAAQF,CAAAA,IAAb,CAAkB,IAAlB,CAA5B,CAAvH,CAA6K7E,OAAQ2D,CAAAA,EAAR,CAAWN,MAAX,CAAmB,OAAnB,CAA4B,IAAK2B,CAAAA,OAAQH,CAAAA,IAAb,CAAkB,IAAlB,CAA5B,CAA7K,CAAmO7E,OAAQ2D,CAAAA,EAAR,CAAW,IAAK5B,CAAAA,OAAhB,CAAyB,SAAzB,CAAoC,IAAKkD,CAAAA,SAAUJ,CAAAA,IAAf,CAAoB,IAApB,CAApC,CAAnO,CATK,CAgBTD,MAAM,EAAG,CACL,IAAKZ,CAAAA,YAAL,CAAkB,MAAlB,CADK,CAQTc,MAAM,CAACI,IAAD,CAAO,CACT,GAAI,CACA,IAAKnD,CAAAA,OAAQoD,CAAAA,GAAb,CAAiBD,IAAjB,CADA,CAGJ,MAAOE,CAAP,CAAU,CACN,IAAKJ,CAAAA,OAAL,CAAa,aAAb,CAA4BI,CAA5B,CADM,CAJD,CAabH,SAAS,CAACI,MAAD,CAAS,CAEdxF,kBAAmByF,CAAAA,QAAnB,CAA4B,EAAA,EAAM,CAC9B,IAAKtB,CAAAA,YAAL,CAAkB,QAAlB,CAA4BqB,MAA5B,CAD8B,CAAlC,CAEG,IAAKnB,CAAAA,YAFR,CAFc,CAWlBa,OAAO,CAACjB,GAAD,CAAM,CACT3D,KAAA,CAAM,OAAN,CAAe2D,GAAf,CACA,KAAKE,CAAAA,YAAL,CAAkB,OAAlB,CAA2BF,GAA3B,CAFS,CAUbT,MAAM,CAACkC,GAAD,CAAM9E,IAAN,CAAY,CACd,IAAI4C,OAAS,IAAK1C,CAAAA,IAAL,CAAU4E,GAAV,CACRlC,OAAL,GACIA,MACA,CADS,IAAIvD,WAAYyD,CAAAA,MAAhB,CAAuB,IAAvB;AAA6BgC,GAA7B,CAAkC9E,IAAlC,CACT,CAAA,IAAKE,CAAAA,IAAL,CAAU4E,GAAV,CAAA,CAAiBlC,MAFrB,CAIA,OAAOA,OANO,CAclBmC,QAAQ,CAACnC,MAAD,CAAS,CACP1C,MAAAA,CAAOpC,MAAOkH,CAAAA,IAAP,CAAY,IAAK9E,CAAAA,IAAjB,CACb,KAAK,MAAM4E,GAAX,GAAkB5E,OAAlB,CAEI,GADe,IAAKA,CAAAA,IAAL0C,CAAUkC,GAAVlC,CACJqC,CAAAA,MAAX,CAAmB,CACfvF,KAAA,CAAM,2CAAN,CAAmDoF,GAAnD,CACA,OAFe,CAKvB,IAAKI,CAAAA,MAAL,EATa,CAiBjBC,OAAO,CAACP,MAAD,CAAS,CACZlF,KAAA,CAAM,mBAAN,CAA2BkF,MAA3B,CACA,OAAMQ,eAAiB,IAAKhE,CAAAA,OAAQiE,CAAAA,MAAb,CAAoBT,MAApB,CACvB,KAAK,IAAIU,EAAI,CAAb,CAAgBA,CAAhB,CAAoBF,cAAexD,CAAAA,MAAnC,CAA2C0D,CAAA,EAA3C,CACI,IAAKzC,CAAAA,MAAO0C,CAAAA,KAAZ,CAAkBH,cAAA,CAAeE,CAAf,CAAlB,CAAqCV,MAAOY,CAAAA,OAA5C,CAJQ,CAYhBlC,OAAO,EAAG,CACN5D,KAAA,CAAM,SAAN,CACA,KAAKS,CAAAA,IAAKsF,CAAAA,OAAV,CAAmBzB,UAAD,EAAgBA,UAAA,EAAlC,CACA,KAAK7D,CAAAA,IAAKyB,CAAAA,MAAV,CAAmB,CACnB;IAAKN,CAAAA,OAAQoE,CAAAA,OAAb,EAJM,CAWVR,MAAM,EAAG,CACLxF,KAAA,CAAM,YAAN,CACA,KAAKsD,CAAAA,aAAL,CAAqB,CAAA,CACrB,KAAKT,CAAAA,aAAL,CAAqB,CAAA,CACrB,KAAKgC,CAAAA,OAAL,CAAa,cAAb,CACI,KAAK1B,CAAAA,MAAT,EACI,IAAKA,CAAAA,MAAOa,CAAAA,KAAZ,EANC,CAaTiC,UAAU,EAAG,CACT,MAAO,KAAKT,CAAAA,MAAL,EADE,CAQbX,OAAO,CAACqB,MAAD,CAASC,WAAT,CAAsB,CACzBnG,KAAA,CAAM,kBAAN,CAA0BkG,MAA1B,CACA,KAAKtC,CAAAA,OAAL,EACA,KAAK1C,CAAAA,OAAQkF,CAAAA,KAAb,EACA,KAAK5E,CAAAA,WAAL,CAAmB,QACnB,KAAKqC,CAAAA,YAAL,CAAkB,OAAlB,CAA2BqC,MAA3B,CAAmCC,WAAnC,CACI,KAAKhE,CAAAA,aAAT,EAA0B,CAAC,IAAKmB,CAAAA,aAAhC,EACI,IAAKP,CAAAA,SAAL,EAPqB,CAe7BA,SAAS,EAAG,CACR,GAAI,IAAKF,CAAAA,aAAT,EAA0B,IAAKS,CAAAA,aAA/B,CACI,MAAO,KACX,OAAMD,KAAO,IACb;GAAI,IAAKnC,CAAAA,OAAQ4B,CAAAA,QAAjB,EAA6B,IAAKV,CAAAA,qBAAlC,CACIpC,KAAA,CAAM,kBAAN,CAGA,CAFA,IAAKkB,CAAAA,OAAQkF,CAAAA,KAAb,EAEA,CADA,IAAKvC,CAAAA,YAAL,CAAkB,kBAAlB,CACA,CAAA,IAAKhB,CAAAA,aAAL,CAAqB,CAAA,CAJzB,KAMK,CACD,MAAMwD,MAAQ,IAAKnF,CAAAA,OAAQoF,CAAAA,QAAb,EACdtG,MAAA,CAAM,yCAAN,CAAiDqG,KAAjD,CACA,KAAKxD,CAAAA,aAAL,CAAqB,CAAA,CACrB,OAAMiB,MAAQ,IAAKC,CAAAA,YAAL,CAAkB,EAAA,EAAM,CAC9BV,IAAKC,CAAAA,aAAT,GAEAtD,KAAA,CAAM,sBAAN,CAGA,CAFA,IAAK6D,CAAAA,YAAL,CAAkB,mBAAlB,CAAuCR,IAAKnC,CAAAA,OAAQ4B,CAAAA,QAApD,CAEA,CAAIO,IAAKC,CAAAA,aAAT,EAEAD,IAAKrB,CAAAA,IAAL,CAAW2B,GAAD,EAAS,CACXA,GAAJ,EACI3D,KAAA,CAAM,yBAAN,CAGA,CAFAqD,IAAKR,CAAAA,aAEL;AAFqB,CAAA,CAErB,CADAQ,IAAKN,CAAAA,SAAL,EACA,CAAA,IAAKc,CAAAA,YAAL,CAAkB,iBAAlB,CAAqCF,GAArC,CAJJ,GAOI3D,KAAA,CAAM,mBAAN,CACA,CAAAqD,IAAKkD,CAAAA,WAAL,EARJ,CADe,CAAnB,CAPA,CADkC,CAAxB,CAoBXF,KApBW,CAqBV,KAAK/F,CAAAA,IAAK6D,CAAAA,SAAd,EACIL,KAAMM,CAAAA,KAAN,EAEJ,KAAK3D,CAAAA,IAAK4D,CAAAA,IAAV,CAAeC,QAAmB,EAAG,CACjCC,YAAA,CAAaT,KAAb,CADiC,CAArC,CA5BC,CAVG,CAgDZyC,WAAW,EAAG,CACV,MAAMC,QAAU,IAAKtF,CAAAA,OAAQ4B,CAAAA,QAC7B,KAAKD,CAAAA,aAAL,CAAqB,CAAA,CACrB,KAAK3B,CAAAA,OAAQkF,CAAAA,KAAb,EACA,KAAKvC,CAAAA,YAAL,CAAkB,WAAlB,CAA+B2C,OAA/B,CAJU,CA1WlB,CAiXAtI,OAAQuB,CAAAA,OAAR,CAAkBA,OAnZqG;",
"sources":["node_modules/socket_DOT_io-client/build/cjs/manager.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$socket_DOT_io_client$build$cjs$manager\"] = function(global,require,module,exports) {\n\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Manager = void 0;\nconst engine_io_client_1 = require(\"engine.io-client\");\nconst socket_js_1 = require(\"./socket.js\");\nconst parser = __importStar(require(\"socket.io-parser\"));\nconst on_js_1 = require(\"./on.js\");\nconst backo2_js_1 = require(\"./contrib/backo2.js\");\nconst component_emitter_1 = require(\"@socket.io/component-emitter\");\nconst debug_1 = __importDefault(require(\"debug\")); // debug()\nconst debug = debug_1.default(\"socket.io-client:manager\"); // debug()\nclass Manager extends component_emitter_1.Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        engine_io_client_1.installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new backo2_js_1.Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        debug(\"readyState %s\", this._readyState);\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        debug(\"opening %s\", this.uri);\n        this.engine = new engine_io_client_1.Socket(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on_js_1.on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        // emit `error`\n        const errorSub = on_js_1.on(socket, \"error\", (err) => {\n            debug(\"error\");\n            self.cleanup();\n            self._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                self.maybeReconnectOnOpen();\n            }\n        });\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            debug(\"connect attempt will timeout after %d\", timeout);\n            if (timeout === 0) {\n                openSubDestroy(); // prevents a race condition with the 'open' event\n            }\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                debug(\"connect attempt timed out after %d\", timeout);\n                openSubDestroy();\n                socket.close();\n                // @ts-ignore\n                socket.emit(\"error\", new Error(\"timeout\"));\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        debug(\"open\");\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on_js_1.on(socket, \"ping\", this.onping.bind(this)), on_js_1.on(socket, \"data\", this.ondata.bind(this)), on_js_1.on(socket, \"error\", this.onerror.bind(this)), on_js_1.on(socket, \"close\", this.onclose.bind(this)), on_js_1.on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        engine_io_client_1.nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        debug(\"error\", err);\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new socket_js_1.Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                debug(\"socket %s is still active, skipping close\", nsp);\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        debug(\"writing packet %j\", packet);\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        debug(\"cleanup\");\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        debug(\"disconnect\");\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n        if (this.engine)\n            this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        debug(\"closed due to %s\", reason);\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            debug(\"reconnect failed\");\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            debug(\"will wait %dms before reconnect attempt\", delay);\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                debug(\"attempting reconnect\");\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        debug(\"reconnect attempt error\");\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        debug(\"reconnect success\");\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\nexports.Manager = Manager;\n\n};"],
"names":["shadow$provide","global","require","module","exports","__createBinding","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","prototype","hasOwnProperty","call","__importDefault","Manager","engine_io_client_1","socket_js_1","parser","on_js_1","backo2_js_1","component_emitter_1","debug","debug_1","default","Emitter","constructor","uri","opts","_a","nsps","subs","path","installTimerFunctions","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","Backoff","min","max","jitter","timeout","_readyState","_parser","encoder","Encoder","decoder","Decoder","_autoConnect","autoConnect","open","arguments","length","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","_reconnecting","attempts","reconnect","fn","indexOf","socket","engine","Socket","self","skipReconnect","openSubDestroy","on","onopen","errorSub","err","cleanup","emitReserved","timer","setTimeoutFn","close","emit","Error","autoUnref","unref","push","subDestroy","clearTimeout","connect","onping","bind","ondata","onerror","onclose","ondecoded","data","add","e","packet","nextTick","nsp","_destroy","keys","active","_close","_packet","encodedPackets","encode","i","write","options","forEach","destroy","disconnect","reason","description","reset","delay","duration","onreconnect","attempt"]
}
