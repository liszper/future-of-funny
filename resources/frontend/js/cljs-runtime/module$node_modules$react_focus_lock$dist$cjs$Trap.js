shadow$provide.module$node_modules$react_focus_lock$dist$cjs$Trap=function(global,require,module,exports){function autoGuard(startIndex,end,step,allNodes){var lastGuard=null,i=startIndex;do{var item=allNodes[i];if(item.guard)item.node.dataset.focusAutoGuard&&(lastGuard=item);else if(item.lockItem){if(i!==startIndex)return;lastGuard=null}else break}while((i+=step)!==end);lastGuard&&(lastGuard.node.tabIndex=0)}global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=
require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _toConsumableArray2=module(require("module$node_modules$$babel$runtime$helpers$toConsumableArray"));global(require("module$node_modules$react$index"));module(require("module$node_modules$prop_types$index"));module=module(require("module$node_modules$react_clientside_effect$lib$index"));var _focusLock=global(require("module$node_modules$focus_lock$dist$es5$index")),
_util=require("module$node_modules$react_focus_lock$dist$cjs$util");require=require("module$node_modules$react_focus_lock$dist$cjs$medium");var lastActiveTrap=null,lastActiveFocus=null,lastPortaledElement=null,focusWasOutsideWindow=!1,defaultWhitelist=function(){return!0},extractRef=function(ref){return ref&&"current"in ref?ref.current:ref},checkInHost=function checkInHost(check,el,boundary){return el&&(el.host===check&&(!el.activeElement||boundary.contains(el.activeElement))||el.parentNode&&checkInHost(check,
el.parentNode,boundary))},withinHost=function(activeElement,workingArea){return workingArea.some(function(area){return checkInHost(activeElement,area,area)})},activateTrap=function(){var result=!1;if(lastActiveTrap){var _lastActiveTrap=lastActiveTrap,persistentFocus=_lastActiveTrap.persistentFocus,autoFocus=_lastActiveTrap.autoFocus,shards=_lastActiveTrap.shards,crossFrame=_lastActiveTrap.crossFrame,focusOptions=_lastActiveTrap.focusOptions;_lastActiveTrap=_lastActiveTrap.observed||lastPortaledElement&&
lastPortaledElement.portaledElement;var activeElement=document&&document.activeElement;if(_lastActiveTrap){shards=[_lastActiveTrap].concat((0,_toConsumableArray2["default"])(shards.map(extractRef).filter(Boolean)));if(!activeElement||(lastActiveTrap.whiteList||defaultWhitelist)(activeElement))if(persistentFocus||(persistentFocus=crossFrame?!!focusWasOutsideWindow:"meanwhile"===focusWasOutsideWindow),persistentFocus||!(document&&document.activeElement===document.body||(0,_focusLock.focusIsHidden)())||
!lastActiveFocus&&autoFocus)!_lastActiveTrap||(0,_focusLock.focusInside)(shards)||activeElement&&withinHost(activeElement,shards)||lastPortaledElement&&lastPortaledElement.portaledElement===activeElement||(document&&!lastActiveFocus&&activeElement&&!autoFocus?(activeElement.blur&&activeElement.blur(),document.body.focus()):(result=(0,_focusLock["default"])(shards,lastActiveFocus,{focusOptions}),lastPortaledElement={})),focusWasOutsideWindow=!1,lastActiveFocus=document&&document.activeElement;document&&
(autoFocus=document&&document.activeElement,crossFrame=(0,_focusLock.getFocusabledIn)(shards),autoFocus=crossFrame.map(function(_ref){return _ref.node}).indexOf(autoFocus),-1<autoFocus&&(crossFrame.filter(function(_ref2){var node=_ref2.node;return _ref2.guard&&node.dataset.focusAutoGuard}).forEach(function(_ref3){return _ref3.node.removeAttribute("tabIndex")}),autoGuard(autoFocus,crossFrame.length,1,crossFrame),autoGuard(autoFocus,-1,-1,crossFrame)))}}return result},onTrap=function(event){activateTrap()&&
event&&(event.stopPropagation(),event.preventDefault())},onBlur=function(){return(0,_util.deferAction)(activateTrap)},onWindowBlur=function(){focusWasOutsideWindow="just";setTimeout(function(){focusWasOutsideWindow="meanwhile"},0)};require.mediumFocus.assignSyncMedium(function(event){var source=event.target;event=event.currentTarget;event.contains(source)||(lastPortaledElement={observerNode:event,portaledElement:source})});require.mediumBlur.assignMedium(onBlur);require.mediumEffect.assignMedium(function(cb){return cb({moveFocusInside:_focusLock["default"],
focusInside:_focusLock.focusInside})});require=(0,module["default"])(function(propsList){return propsList.filter(function(_ref5){return!_ref5.disabled})},function(traps){var trap=traps.slice(-1)[0];trap&&!lastActiveTrap&&(document.addEventListener("focusin",onTrap),document.addEventListener("focusout",onBlur),window.addEventListener("blur",onWindowBlur));var lastTrap=lastActiveTrap,sameTrap=lastTrap&&trap&&trap.id===lastTrap.id;lastActiveTrap=trap;lastTrap&&!sameTrap&&(lastTrap.onDeactivation(),traps.filter(function(_ref6){return _ref6.id===
lastTrap.id}).length||lastTrap.returnFocus(!trap));if(trap){lastActiveFocus=null;if(!sameTrap||lastTrap.observed!==trap.observed)trap.onActivation();activateTrap(!0);(0,_util.deferAction)(activateTrap)}else document.removeEventListener("focusin",onTrap),document.removeEventListener("focusout",onBlur),window.removeEventListener("blur",onWindowBlur),lastActiveFocus=null})(function(){return null});exports["default"]=require}
//# sourceMappingURL=module$node_modules$react_focus_lock$dist$cjs$Trap.js.map
