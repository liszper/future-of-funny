shadow$provide.module$node_modules$engine_DOT_io_client$build$cjs$transport=function(global,require,module,exports){global=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{"default":mod}};Object.defineProperty(exports,"__esModule",{value:!0});exports.Transport=void 0;const engine_io_parser_1=require("module$node_modules$engine_DOT_io_parser$build$cjs$index");module=require("module$node_modules$$socket_DOT_io$component_emitter$index");const util_js_1=require("module$node_modules$engine_DOT_io_client$build$cjs$util"),
debug=(0,global(require("module$node_modules$engine_DOT_io_client$node_modules$debug$src$browser")).default)("engine.io-client:transport");class TransportError extends Error{constructor(reason,description,context){super(reason);this.description=description;this.context=context;this.type="TransportError"}}class Transport extends module.Emitter{constructor(opts){super();this.writable=!1;(0,util_js_1.installTimerFunctions)(this,opts);this.opts=opts;this.query=opts.query;this.readyState="";this.socket=
opts.socket}onError(reason,description,context){super.emitReserved("error",new TransportError(reason,description,context));return this}open(){if("closed"===this.readyState||""===this.readyState)this.readyState="opening",this.doOpen();return this}close(){if("opening"===this.readyState||"open"===this.readyState)this.doClose(),this.onClose();return this}send(packets){"open"===this.readyState?this.write(packets):debug("transport is not open, discarding packets")}onOpen(){this.readyState="open";this.writable=
!0;super.emitReserved("open")}onData(data){data=(0,engine_io_parser_1.decodePacket)(data,this.socket.binaryType);this.onPacket(data)}onPacket(packet){super.emitReserved("packet",packet)}onClose(details){this.readyState="closed";super.emitReserved("close",details)}}exports.Transport=Transport}
//# sourceMappingURL=module$node_modules$engine_DOT_io_client$build$cjs$transport.js.map
