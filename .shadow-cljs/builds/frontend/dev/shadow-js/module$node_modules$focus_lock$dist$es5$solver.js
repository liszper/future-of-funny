["^ ","~:resource-id",["~:shadow.build.npm/resource","node_modules/focus-lock/dist/es5/solver.js"],"~:js","shadow$provide.module$node_modules$focus_lock$dist$es5$solver=function(global,require,module,exports){Object.defineProperty(exports,\"__esModule\",{value:!0});exports.newFocus=exports.NEW_FOCUS=void 0;var correctFocus_1=require(\"module$node_modules$focus_lock$dist$es5$utils$correctFocus\"),firstFocus_1=require(\"module$node_modules$focus_lock$dist$es5$utils$firstFocus\"),is_1=require(\"module$node_modules$focus_lock$dist$es5$utils$is\");exports.NEW_FOCUS=\"NEW_FOCUS\";exports.newFocus=function(innerNodes,\nouterNodes,activeElement,lastNode){var cnt=innerNodes.length,firstFocus=innerNodes[0],lastFocus=innerNodes[cnt-1],isOnGuard=(0,is_1.isGuard)(activeElement);if(!(activeElement&&0<=innerNodes.indexOf(activeElement))){var activeIndex=void 0!==activeElement?outerNodes.indexOf(activeElement):-1,lastIndex=lastNode?outerNodes.indexOf(lastNode):activeIndex,lastNodeInside=lastNode?innerNodes.indexOf(lastNode):-1;lastIndex=activeIndex-lastIndex;firstFocus=outerNodes.indexOf(firstFocus);lastFocus=outerNodes.indexOf(lastFocus);\nouterNodes=(0,correctFocus_1.correctNodes)(outerNodes);activeElement=(void 0!==activeElement?outerNodes.indexOf(activeElement):-1)-(lastNode?outerNodes.indexOf(lastNode):activeIndex);lastNode=(0,firstFocus_1.pickFocusable)(innerNodes,0);innerNodes=(0,firstFocus_1.pickFocusable)(innerNodes,cnt-1);if(-1===activeIndex||-1===lastNodeInside)return exports.NEW_FOCUS;if(!lastIndex&&0<=lastNodeInside)return lastNodeInside;if(activeIndex<=firstFocus&&isOnGuard&&1<Math.abs(lastIndex))return innerNodes;if(activeIndex>=\nlastFocus&&isOnGuard&&1<Math.abs(lastIndex))return lastNode;if(lastIndex&&1<Math.abs(activeElement))return lastNodeInside;if(activeIndex<=firstFocus)return innerNodes;if(activeIndex>lastFocus)return lastNode;if(lastIndex)return 1<Math.abs(lastIndex)?lastNodeInside:(cnt+lastNodeInside+lastIndex)%cnt}}}","~:source","shadow$provide[\"module$node_modules$focus_lock$dist$es5$solver\"] = function(global,require,module,exports) {\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.newFocus = exports.NEW_FOCUS = void 0;\nvar correctFocus_1 = require(\"./utils/correctFocus\");\nvar firstFocus_1 = require(\"./utils/firstFocus\");\nvar is_1 = require(\"./utils/is\");\nexports.NEW_FOCUS = 'NEW_FOCUS';\n/**\n * Main solver for the \"find next focus\" question\n * @param innerNodes\n * @param outerNodes\n * @param activeElement\n * @param lastNode\n * @returns {number|string|undefined|*}\n */\nvar newFocus = function (innerNodes, outerNodes, activeElement, lastNode) {\n    var cnt = innerNodes.length;\n    var firstFocus = innerNodes[0];\n    var lastFocus = innerNodes[cnt - 1];\n    var isOnGuard = (0, is_1.isGuard)(activeElement);\n    // focus is inside\n    if (activeElement && innerNodes.indexOf(activeElement) >= 0) {\n        return undefined;\n    }\n    var activeIndex = activeElement !== undefined ? outerNodes.indexOf(activeElement) : -1;\n    var lastIndex = lastNode ? outerNodes.indexOf(lastNode) : activeIndex;\n    var lastNodeInside = lastNode ? innerNodes.indexOf(lastNode) : -1;\n    var indexDiff = activeIndex - lastIndex;\n    var firstNodeIndex = outerNodes.indexOf(firstFocus);\n    var lastNodeIndex = outerNodes.indexOf(lastFocus);\n    var correctedNodes = (0, correctFocus_1.correctNodes)(outerNodes);\n    var correctedIndex = activeElement !== undefined ? correctedNodes.indexOf(activeElement) : -1;\n    var correctedIndexDiff = correctedIndex - (lastNode ? correctedNodes.indexOf(lastNode) : activeIndex);\n    var returnFirstNode = (0, firstFocus_1.pickFocusable)(innerNodes, 0);\n    var returnLastNode = (0, firstFocus_1.pickFocusable)(innerNodes, cnt - 1);\n    // new focus\n    if (activeIndex === -1 || lastNodeInside === -1) {\n        return exports.NEW_FOCUS;\n    }\n    // old focus\n    if (!indexDiff && lastNodeInside >= 0) {\n        return lastNodeInside;\n    }\n    // first element\n    if (activeIndex <= firstNodeIndex && isOnGuard && Math.abs(indexDiff) > 1) {\n        return returnLastNode;\n    }\n    // last element\n    if (activeIndex >= lastNodeIndex && isOnGuard && Math.abs(indexDiff) > 1) {\n        return returnFirstNode;\n    }\n    // jump out, but not on the guard\n    if (indexDiff && Math.abs(correctedIndexDiff) > 1) {\n        return lastNodeInside;\n    }\n    // focus above lock\n    if (activeIndex <= firstNodeIndex) {\n        return returnLastNode;\n    }\n    // focus below lock\n    if (activeIndex > lastNodeIndex) {\n        return returnFirstNode;\n    }\n    // index is inside tab order, but outside Lock\n    if (indexDiff) {\n        if (Math.abs(indexDiff) > 1) {\n            return lastNodeInside;\n        }\n        return (cnt + lastNodeInside + indexDiff) % cnt;\n    }\n    // do nothing\n    return undefined;\n};\nexports.newFocus = newFocus;\n\n};","~:removed-requires",["~#set",[]],"~:actual-requires",["^5",["~$shadow.js","~$module$node_modules$focus_lock$dist$es5$utils$is","~$module$node_modules$focus_lock$dist$es5$utils$firstFocus","~$module$node_modules$focus_lock$dist$es5$utils$correctFocus"]],"~:properties",["^5",["__esModule","NEW_FOCUS","value","newFocus"]],"~:compiled-at",1681642524891,"~:source-map-json","{\n\"version\":3,\n\"file\":\"module$node_modules$focus_lock$dist$es5$solver.js\",\n\"lineCount\":4,\n\"mappings\":\"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\",\n\"sources\":[\"node_modules/focus-lock/dist/es5/solver.js\"],\n\"sourcesContent\":[\"shadow$provide[\\\"module$node_modules$focus_lock$dist$es5$solver\\\"] = function(global,require,module,exports) {\\n\\\"use strict\\\";\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.newFocus = exports.NEW_FOCUS = void 0;\\nvar correctFocus_1 = require(\\\"./utils/correctFocus\\\");\\nvar firstFocus_1 = require(\\\"./utils/firstFocus\\\");\\nvar is_1 = require(\\\"./utils/is\\\");\\nexports.NEW_FOCUS = 'NEW_FOCUS';\\n/**\\n * Main solver for the \\\"find next focus\\\" question\\n * @param innerNodes\\n * @param outerNodes\\n * @param activeElement\\n * @param lastNode\\n * @returns {number|string|undefined|*}\\n */\\nvar newFocus = function (innerNodes, outerNodes, activeElement, lastNode) {\\n    var cnt = innerNodes.length;\\n    var firstFocus = innerNodes[0];\\n    var lastFocus = innerNodes[cnt - 1];\\n    var isOnGuard = (0, is_1.isGuard)(activeElement);\\n    // focus is inside\\n    if (activeElement && innerNodes.indexOf(activeElement) >= 0) {\\n        return undefined;\\n    }\\n    var activeIndex = activeElement !== undefined ? outerNodes.indexOf(activeElement) : -1;\\n    var lastIndex = lastNode ? outerNodes.indexOf(lastNode) : activeIndex;\\n    var lastNodeInside = lastNode ? innerNodes.indexOf(lastNode) : -1;\\n    var indexDiff = activeIndex - lastIndex;\\n    var firstNodeIndex = outerNodes.indexOf(firstFocus);\\n    var lastNodeIndex = outerNodes.indexOf(lastFocus);\\n    var correctedNodes = (0, correctFocus_1.correctNodes)(outerNodes);\\n    var correctedIndex = activeElement !== undefined ? correctedNodes.indexOf(activeElement) : -1;\\n    var correctedIndexDiff = correctedIndex - (lastNode ? correctedNodes.indexOf(lastNode) : activeIndex);\\n    var returnFirstNode = (0, firstFocus_1.pickFocusable)(innerNodes, 0);\\n    var returnLastNode = (0, firstFocus_1.pickFocusable)(innerNodes, cnt - 1);\\n    // new focus\\n    if (activeIndex === -1 || lastNodeInside === -1) {\\n        return exports.NEW_FOCUS;\\n    }\\n    // old focus\\n    if (!indexDiff && lastNodeInside >= 0) {\\n        return lastNodeInside;\\n    }\\n    // first element\\n    if (activeIndex <= firstNodeIndex && isOnGuard && Math.abs(indexDiff) > 1) {\\n        return returnLastNode;\\n    }\\n    // last element\\n    if (activeIndex >= lastNodeIndex && isOnGuard && Math.abs(indexDiff) > 1) {\\n        return returnFirstNode;\\n    }\\n    // jump out, but not on the guard\\n    if (indexDiff && Math.abs(correctedIndexDiff) > 1) {\\n        return lastNodeInside;\\n    }\\n    // focus above lock\\n    if (activeIndex <= firstNodeIndex) {\\n        return returnLastNode;\\n    }\\n    // focus below lock\\n    if (activeIndex > lastNodeIndex) {\\n        return returnFirstNode;\\n    }\\n    // index is inside tab order, but outside Lock\\n    if (indexDiff) {\\n        if (Math.abs(indexDiff) > 1) {\\n            return lastNodeInside;\\n        }\\n        return (cnt + lastNodeInside + indexDiff) % cnt;\\n    }\\n    // do nothing\\n    return undefined;\\n};\\nexports.newFocus = newFocus;\\n\\n};\"],\n\"names\":[\"shadow$provide\",\"global\",\"require\",\"module\",\"exports\",\"Object\",\"defineProperty\",\"value\",\"newFocus\",\"NEW_FOCUS\",\"correctFocus_1\",\"firstFocus_1\",\"is_1\",\"innerNodes\",\"outerNodes\",\"activeElement\",\"lastNode\",\"cnt\",\"length\",\"firstFocus\",\"lastFocus\",\"isOnGuard\",\"isGuard\",\"indexOf\",\"activeIndex\",\"undefined\",\"lastIndex\",\"lastNodeInside\",\"indexDiff\",\"firstNodeIndex\",\"lastNodeIndex\",\"correctedNodes\",\"correctNodes\",\"correctedIndexDiff\",\"correctedIndex\",\"returnFirstNode\",\"pickFocusable\",\"returnLastNode\",\"Math\",\"abs\"]\n}\n"]