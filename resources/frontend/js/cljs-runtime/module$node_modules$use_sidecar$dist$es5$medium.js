shadow$provide.module$node_modules$use_sidecar$dist$es5$medium=function(global,require,module,exports){function ItoI(a){return a}function innerCreateMedium(defaults,middleware){void 0===middleware&&(middleware=ItoI);var buffer=[],assigned=!1;return{read:function(){if(assigned)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return buffer.length?buffer[buffer.length-1]:defaults},useMedium:function(data){var item=middleware(data,assigned);
buffer.push(item);return function(){buffer=buffer.filter(function(x){return x!==item})}},assignSyncMedium:function(cb){for(assigned=!0;buffer.length;){var cbs=buffer;buffer=[];cbs.forEach(cb)}buffer={push:function(x){return cb(x)},filter:function(){return buffer}}},assignMedium:function(cb){assigned=!0;var pendingQueue=[];if(buffer.length){var cbs$jscomp$0=buffer;buffer=[];cbs$jscomp$0.forEach(cb);pendingQueue=buffer}var executeQueue=function(){var cbs=pendingQueue;pendingQueue=[];cbs.forEach(cb)};
Promise.resolve().then(executeQueue);buffer={push:function(x){pendingQueue.push(x);Promise.resolve().then(executeQueue)},filter:function(filter){pendingQueue=pendingQueue.filter(filter);return buffer}}}}}Object.defineProperty(exports,"__esModule",{value:!0});exports.createSidecarMedium=exports.createMedium=void 0;var tslib_1=require("module$node_modules$tslib$tslib");exports.createMedium=function(defaults,middleware){void 0===middleware&&(middleware=ItoI);return innerCreateMedium(defaults,middleware)};
exports.createSidecarMedium=function(options){void 0===options&&(options={});var medium=innerCreateMedium(null);medium.options=tslib_1.__assign({async:!0,ssr:!1},options);return medium}}
//# sourceMappingURL=module$node_modules$use_sidecar$dist$es5$medium.js.map
