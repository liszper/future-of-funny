shadow$provide.module$node_modules$react_remove_scroll$dist$es5$SideEffect=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.RemoveScrollSideCar=exports.getDeltaXY=exports.getTouchXY=void 0;var tslib_1=require("module$node_modules$tslib$tslib"),React=tslib_1.__importStar(require("module$node_modules$react$index")),react_remove_scroll_bar_1=require("module$node_modules$react_remove_scroll_bar$dist$es5$index"),react_style_singleton_1=require("module$node_modules$react_style_singleton$dist$es5$index"),
aggresiveCapture_1=require("module$node_modules$react_remove_scroll$dist$es5$aggresiveCapture"),handleScroll_1=require("module$node_modules$react_remove_scroll$dist$es5$handleScroll");exports.getTouchXY=function(event){return"changedTouches"in event?[event.changedTouches[0].clientX,event.changedTouches[0].clientY]:[0,0]};exports.getDeltaXY=function(event){return[event.deltaX,event.deltaY]};var extractRef=function(ref){return ref&&"current"in ref?ref.current:ref},generateStyle=function(id){return"\n  .block-interactivity-".concat(id,
" {pointer-events: none;}\n  .allow-interactivity-").concat(id," {pointer-events: all;}\n")},idCounter=0,lockStack=[];exports.RemoveScrollSideCar=function(props){var shouldPreventQueue=React.useRef([]),touchStartRef=React.useRef([0,0]),activeAxis=React.useRef(),id=React.useState(idCounter++)[0],Style=React.useState(function(){return(0,react_style_singleton_1.styleSingleton)()})[0],lastProps=React.useRef(props);React.useEffect(function(){lastProps.current=props},[props]);React.useEffect(function(){if(props.inert){document.body.classList.add("block-interactivity-".concat(id));
var allow_1=tslib_1.__spreadArray([props.lockRef.current],(props.shards||[]).map(extractRef),!0).filter(Boolean);allow_1.forEach(function(el){return el.classList.add("allow-interactivity-".concat(id))});return function(){document.body.classList.remove("block-interactivity-".concat(id));allow_1.forEach(function(el){return el.classList.remove("allow-interactivity-".concat(id))})}}},[props.inert,props.lockRef.current,props.shards]);var shouldCancelEvent=React.useCallback(function(event,parent){if("touches"in
event&&2===event.touches.length)return!lastProps.current.allowPinchZoom;var touch=(0,exports.getTouchXY)(event),touchStart=touchStartRef.current,deltaX="deltaX"in event?event.deltaX:touchStart[0]-touch[0];touch="deltaY"in event?event.deltaY:touchStart[1]-touch[1];var target=event.target,moveDirection=Math.abs(deltaX)>Math.abs(touch)?"h":"v";if("touches"in event&&"h"===moveDirection&&"range"===target.type)return!1;var canBeScrolledInMainDirection=(0,handleScroll_1.locationCouldBeScrolled)(moveDirection,
target);if(!canBeScrolledInMainDirection)return!0;canBeScrolledInMainDirection?touchStart=moveDirection:(touchStart="v"===moveDirection?"h":"v",canBeScrolledInMainDirection=(0,handleScroll_1.locationCouldBeScrolled)(moveDirection,target));if(!canBeScrolledInMainDirection)return!1;!activeAxis.current&&"changedTouches"in event&&(deltaX||touch)&&(activeAxis.current=touchStart);if(!touchStart)return!0;touchStart=activeAxis.current||touchStart;return(0,handleScroll_1.handleScroll)(touchStart,parent,event,
"h"===touchStart?deltaX:touch,!0)},[]),shouldPrevent=React.useCallback(function(_event){if(lockStack.length&&lockStack[lockStack.length-1]===Style){var delta="deltaY"in _event?(0,exports.getDeltaXY)(_event):(0,exports.getTouchXY)(_event),sourceEvent=shouldPreventQueue.current.filter(function(e){var JSCompiler_temp;if(JSCompiler_temp=e.name===_event.type&&e.target===_event.target)e=e.delta,JSCompiler_temp=e[0]===delta[0]&&e[1]===delta[1];return JSCompiler_temp})[0];sourceEvent&&sourceEvent.should?
_event.cancelable&&_event.preventDefault():sourceEvent||(sourceEvent=(lastProps.current.shards||[]).map(extractRef).filter(Boolean).filter(function(node){return node.contains(_event.target)}),(0<sourceEvent.length?shouldCancelEvent(_event,sourceEvent[0]):!lastProps.current.noIsolation)&&_event.cancelable&&_event.preventDefault())}},[]),shouldCancel=React.useCallback(function(name,delta,target,should){var event={name,delta,target,should};shouldPreventQueue.current.push(event);setTimeout(function(){shouldPreventQueue.current=
shouldPreventQueue.current.filter(function(e){return e!==event})},1)},[]),scrollTouchStart=React.useCallback(function(event){touchStartRef.current=(0,exports.getTouchXY)(event);activeAxis.current=void 0},[]),scrollWheel=React.useCallback(function(event){shouldCancel(event.type,(0,exports.getDeltaXY)(event),event.target,shouldCancelEvent(event,props.lockRef.current))},[]),scrollTouchMove=React.useCallback(function(event){shouldCancel(event.type,(0,exports.getTouchXY)(event),event.target,shouldCancelEvent(event,
props.lockRef.current))},[]);React.useEffect(function(){lockStack.push(Style);props.setCallbacks({onScrollCapture:scrollWheel,onWheelCapture:scrollWheel,onTouchMoveCapture:scrollTouchMove});document.addEventListener("wheel",shouldPrevent,aggresiveCapture_1.nonPassive);document.addEventListener("touchmove",shouldPrevent,aggresiveCapture_1.nonPassive);document.addEventListener("touchstart",scrollTouchStart,aggresiveCapture_1.nonPassive);return function(){lockStack=lockStack.filter(function(inst){return inst!==
Style});document.removeEventListener("wheel",shouldPrevent,aggresiveCapture_1.nonPassive);document.removeEventListener("touchmove",shouldPrevent,aggresiveCapture_1.nonPassive);document.removeEventListener("touchstart",scrollTouchStart,aggresiveCapture_1.nonPassive)}},[]);var removeScrollBar=props.removeScrollBar;return React.createElement(React.Fragment,null,props.inert?React.createElement(Style,{styles:generateStyle(id)}):null,removeScrollBar?React.createElement(react_remove_scroll_bar_1.RemoveScrollBar,
{gapMode:"margin"}):null)}}
//# sourceMappingURL=module$node_modules$react_remove_scroll$dist$es5$SideEffect.js.map
